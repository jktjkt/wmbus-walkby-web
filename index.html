<!doctype html>
<html>
  <head>
    <title>WM-Bus meters</title>
  </head>

  <body>
    <div id="background">
      <h1>WM-Bus packet sniffing</h1>

      <div class="toolbar">
        <button id="connect">Connect</button>
        <button id="activate-polyfill" onclick="window.serial_polyfill = window.serial_polyfill_inactive; document.getElementById('activate-polyfill').disabled = true;">Activate WebUSB Polyfill</button>
      </div>

      <!-- https://github.com/colinbdclark/slip.js -->
      <script type="text/javascript" src="slip.js"></script>
      <!-- https://github.com/taichunmin/js-crc -->
      <script type="text/javascript" src="crc.js"></script>

      <script type="module" src="wmbus-components.js"></script>
      <meters-table></meters-table>

      <script type="text/javascript" src="wmbus.js"></script>

      <!-- https://cdn.jsdelivr.net/npm/web-serial-polyfill@1.0.15/dist/serial.min.js -->
      <script type="module" src="serial.min.js"></script>
      <script type="module">
          import {serial} from './serial.min.js';
          window.serial_polyfill_inactive = serial;
      </script>
    </div>
  </body>
</html>

